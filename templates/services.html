{% extends "layout.html" %}
{% block content %}
<div class="intro-section py-5" style="background-color: #f8f9fa;">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h2 class="text-center mb-4">Automated GPS Location Generation</h2>
                <p class="lead text-center mb-4">Efficiently mark GPS coordinates on satellite images for inspection purposes. This service helps you identify specific locations, aiding in spatial analysis and planning for inspection tasks.</p>
            </div>
            <div class="col-md-6">
                <img class="img-fluid " src="{{url_for('static', filename='solarFarm.jpg')}}" alt="">
            </div>
        </div>
    </div>
</div>

<div class="container mt-5">
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="card-title text-center mb-3">Upload Image</h3>
                    <form action="{{ url_for('handle_ser_input') }}" method="post" enctype="multipart/form-data">
                        <div class="mb-3">
                            <label for="imageUpload" class="form-label">Upload Satellite Image</label>
                            <input type="file" class="form-control" id="imageUpload" name="image" accept="image/*">
                        </div>
                        <div class="mb-3">
                            <label for="upperLeftLat" class="form-label">Upper Left Corner Latitude</label>
                            <input type="text" class="form-control" id="upperLeftLat" name="upper_left_lat">
                        </div>
                        <div class="mb-3">
                            <label for="upperLeftLon" class="form-label">Upper Left Corner Longitude</label>
                            <input type="text" class="form-control" id="upperLeftLon" name="upper_left_lon">
                        </div>
                        <div class="mb-3">
                            <label for="lowerRightLat" class="form-label">Lower Right Corner Latitude</label>
                            <input type="text" class="form-control" id="lowerRightLat" name="lower_right_lat">
                        </div>
                        <div class="mb-3">
                            <label for="lowerRightLon" class="form-label">Lower Right Corner Longitude</label>
                            <input type="text" class="form-control" id="lowerRightLon" name="lower_right_lon">
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                    
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body">
                    <h3 class="card-title text-center mb-3">Generated GPS Location Points</h3>
                    <div id="map" style="height: 600px; width: 1000px;"></div>

                    <script>
                      function initMap() {
                        var center = { lat: 24.454865, lng:32.690726 };
                        var map = new google.maps.Map(document.getElementById('map'), {
                          zoom: 100,
                          center: center,
                          mapTypeId: google.maps.MapTypeId.SATELLITE
                        });
                    
                        var gpsPoints = {{ gps_points | safe }};
                    <script>
                        function initMap() {
                            var center = { lat: 24.454865, lng:32.690726 };
                            var map = new google.maps.Map(document.getElementById('map'), {
                            zoom: 100,
                            center: center,
                            mapTypeId: google.maps.MapTypeId.SATELLITE
                            });

                            var gpsPoints = {{ gps_points | safe }};

                            gpsPoints.forEach(function (point) {
                            var startMarker = new google.maps.Marker({
                                position: point.start,
                                map: map,
                                title: 'Start'
                            });

                            var endMarker = new google.maps.Marker({
                                position: point.end,
                                map: map,
                                title: 'End'
                            });
                            });
                        }
                        </script>
                        <script src="https://maps.googleapis.com/maps/api/js?key=&callback=initMap" async defer></script>


                       
                    
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock content %}
